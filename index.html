<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>SFES SPTA Transparency Portal</title>
  <meta name="description" content="San Francisco Elementary School (Kiko Rosa, Brgy. San Francisco, General Trias City) – SPTA Transparency Portal." />
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
  <style>
    :root{--brand:#0d6efd;--muted:#6c757d}
    html,body{font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif;background:#f7f8fa}
    .shadow-soft{box-shadow:0 8px 30px rgba(0,0,0,.06)}
    .card{border:0;border-radius:1rem}
    .section-title{font-weight:700}
    .sidebar-sticky{position:sticky;top:84px}
    .nav-vert .nav-link{border-radius:.75rem;text-align:left}
    .nav-vert .nav-link.active{background:var(--brand);color:#fff}
    /* Center KPIs on mobile */
    @media (max-width: 767.98px){ .kpi .card-body{text-align:center} }
    @media print{.no-print{display:none!important}body{background:#fff}}
  </style>
</head>
<body>
  <!-- Top Bar / Brand -->
  <header class="bg-white border-bottom sticky-top">
    <div class="container py-2 d-flex align-items-center">
      <a class="d-flex align-items-center gap-2 text-decoration-none" href="#">
        <span class="badge text-bg-primary rounded-pill">SPTA</span>
        <span class="text-dark">
          <div class="fw-bold lh-1">San Francisco Elementary School</div>
          <small class="text-muted">Kiko Rosa, Brgy. San Francisco, General Trias City</small>
        </span>
      </a>
    </div>
  </header>

  <!-- Hero -->
  <section class="bg-primary text-white py-4 border-bottom">
    <div class="container">
      <div class="row align-items-center g-3">
        <div class="col-12 col-lg-8">
          <h1 class="h3 mb-2">SPTA Transparency Portal</h1>
          <p class="mb-0 opacity-75">Real-time view of resolutions, meetings, finances, projects, and documents.</p>
        </div>
        <div class="col-12 col-lg-4">
          <form class="d-flex gap-2" onsubmit="event.preventDefault(); doGlobalSearch()">
            <input id="searchAll" type="search" class="form-control" placeholder="Search resolutions, minutes, finances, projects…"/>
            <button class="btn btn-light">Search</button>
          </form>
        </div>
      </div>
    </div>
  </section>

  <!-- Mobile Menu Trigger placed between Hero and Main -->
  <div class="container d-lg-none my-2">
    <button class="btn btn-dark w-100" type="button" data-bs-toggle="offcanvas" data-bs-target="#mobileMenu" aria-controls="mobileMenu">
      ☰ Menu
    </button>
  </div>

  <!-- Offcanvas Mobile Menu -->
  <div class="offcanvas offcanvas-end" tabindex="-1" id="mobileMenu" aria-labelledby="mobileMenuLabel">
    <div class="offcanvas-header">
      <h5 class="offcanvas-title" id="mobileMenuLabel">Menu</h5>
      <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close"></button>
    </div>
    <div class="offcanvas-body">
      <div class="list-group">
        <a class="list-group-item list-group-item-action" href="#tab-dashboard"  data-bs-toggle="pill" data-bs-dismiss="offcanvas">Dashboard</a>
        <a class="list-group-item list-group-item-action" href="#tab-resolutions" data-bs-toggle="pill" data-bs-dismiss="offcanvas">Resolutions</a>
        <a class="list-group-item list-group-item-action" href="#tab-meetings"    data-bs-toggle="pill" data-bs-dismiss="offcanvas">Meetings & Minutes</a>
        <a class="list-group-item list-group-item-action" href="#tab-finance"     data-bs-toggle="pill" data-bs-dismiss="offcanvas">Financials</a>
        <a class="list-group-item list-group-item-action" href="#tab-projects"    data-bs-toggle="pill" data-bs-dismiss="offcanvas">Projects</a>
        <a class="list-group-item list-group-item-action" href="#tab-log"         data-bs-toggle="pill" data-bs-dismiss="offcanvas">Transparency Log</a>
        <a class="list-group-item list-group-item-action" href="#tab-officers"    data-bs-toggle="pill" data-bs-dismiss="offcanvas">Officers</a>
        <a class="list-group-item list-group-item-action" href="#tab-docs"        data-bs-toggle="pill" data-bs-dismiss="offcanvas">Documents</a>
        <a class="list-group-item list-group-item-action" href="#tab-feedback"    data-bs-toggle="pill" data-bs-dismiss="offcanvas">Feedback</a>
      </div>
    </div>
  </div>

  <!-- Main layout: Sidebar (lg+) + Content -->
  <div class="container py-3">
    <div class="row g-3">
      <!-- Sidebar for desktop -->
      <aside class="col-lg-3 d-none d-lg-block">
        <div class="sidebar-sticky">
          <div class="card shadow-soft">
            <div class="card-body">
              <h2 class="h6 text-muted mb-3">Menu</h2>
              <div class="nav nav-pills flex-column nav-vert" role="tablist" aria-orientation="vertical">
                <button class="nav-link active" data-bs-toggle="pill" data-bs-target="#tab-dashboard" type="button">Dashboard</button>
                <button class="nav-link" data-bs-toggle="pill" data-bs-target="#tab-resolutions" type="button">Resolutions</button>
                <button class="nav-link" data-bs-toggle="pill" data-bs-target="#tab-meetings" type="button">Meetings & Minutes</button>
                <button class="nav-link" data-bs-toggle="pill" data-bs-target="#tab-finance" type="button">Financials</button>
                <button class="nav-link" data-bs-toggle="pill" data-bs-target="#tab-projects" type="button">Projects</button>
                <button class="nav-link" data-bs-toggle="pill" data-bs-target="#tab-log" type="button">Transparency Log</button>
                <button class="nav-link" data-bs-toggle="pill" data-bs-target="#tab-officers" type="button">Officers</button>
                <button class="nav-link" data-bs-toggle="pill" data-bs-target="#tab-docs" type="button">Documents</button>
                <button class="nav-link" data-bs-toggle="pill" data-bs-target="#tab-feedback" type="button">Feedback</button>
              </div>
            </div>
          </div>
        </div>
      </aside>

      <!-- Content -->
      <main class="col-12 col-lg-9 tab-content">
        <!-- Dashboard -->
        <section class="tab-pane fade show active" id="tab-dashboard">
          <div class="row g-3">
            <!-- KPIs -->
            <div class="col-6 col-md-3"><div class="card shadow-soft kpi"><div class="card-body"><div class="text-muted small">Balance</div><div class="h4 mb-0" id="kpi-balance">₱0.00</div></div></div></div>
            <div class="col-6 col-md-3"><div class="card shadow-soft kpi"><div class="card-body"><div class="text-muted small">Total Donations (YTD)</div><div class="h4 mb-0" id="kpi-donations">₱0.00</div></div></div></div>
            <div class="col-6 col-md-3"><div class="card shadow-soft kpi"><div class="card-body"><div class="text-muted small">Projects Active</div><div class="h4 mb-0" id="kpi-projects">0</div></div></div></div>
            <div class="col-6 col-md-3"><div class="card shadow-soft kpi"><div class="card-body"><div class="text-muted small">Issues Open</div><div class="h4 mb-0" id="kpi-issues">0</div></div></div></div>
          </div>

          <div class="row g-3 mt-1">
            <div class="col-12 col-xl-8">
              <div class="card shadow-soft"><div class="card-body">
                <h2 class="h6 section-title mb-3">Announcements</h2>
                <ul class="list-group list-group-flush" id="announcementList"></ul>
              </div></div>
            </div>
            <div class="col-12 col-xl-4">
              <div class="card shadow-soft"><div class="card-body">
                <h2 class="h6 section-title mb-3">Quick Links</h2>
                <div class="d-grid gap-2">
                  <a class="btn btn-outline-primary" href="#tab-resolutions" data-bs-toggle="pill">View Resolutions</a>
                  <a class="btn btn-outline-primary" href="#tab-finance" data-bs-toggle="pill">See Financials</a>
                  <a class="btn btn-outline-primary" href="#tab-projects" data-bs-toggle="pill">Projects Tracker</a>
                  <a class="btn btn-primary" href="#tab-feedback" data-bs-toggle="pill">Submit a Suggestion/Complaint</a>
                </div>
              </div></div>
            </div>
          </div>
        </section>

        <!-- Resolutions -->
        <section class="tab-pane fade" id="tab-resolutions">
          <div class="d-flex flex-column flex-md-row align-items-md-center justify-content-between gap-2 mb-3">
            <h2 class="h5 section-title mb-0">Resolutions</h2>
          </div>

          <!-- Status selector: acts like 4 pages inside Resolutions -->
          <ul class="nav nav-pills gap-2 flex-wrap" id="resoStatusTabs" role="tablist">
            <li class="nav-item" role="presentation">
              <button class="btn btn-outline-primary active" data-bs-toggle="pill" data-bs-target="#res-proposed" type="button" role="tab">Proposed</button>
            </li>
            <li class="nav-item" role="presentation">
              <button class="btn btn-outline-primary" data-bs-toggle="pill" data-bs-target="#res-review" type="button" role="tab">Under Review</button>
            </li>
            <li class="nav-item" role="presentation">
              <button class="btn btn-outline-primary" data-bs-toggle="pill" data-bs-target="#res-approved" type="button" role="tab">Approved</button>
            </li>
            <li class="nav-item" role="presentation">
              <button class="btn btn-outline-primary" data-bs-toggle="pill" data-bs-target="#res-disapproved" type="button" role="tab">Disapproved</button>
            </li>
          </ul>

          <div class="tab-content mt-3">
            <!-- Proposed -->
            <div class="tab-pane fade show active" id="res-proposed" role="tabpanel">
              <div class="card shadow-soft">
                <div class="card-body">
                  <div class="table-responsive">
                    <table class="table table-sm align-middle mb-0" id="tbl-proposed">
                      <thead class="table-light">
                        <tr>
                          <th style="width:95px">Reso No.</th>
                          <th>Title</th>
                          <th style="width:220px">Nominated Lead</th>
                          <th style="width:380px">Basis</th>
                        </tr>
                      </thead>
                      <tbody></tbody>
                    </table>
                  </div>
                </div>
              </div>
            </div>

            <!-- Under Review -->
            <div class="tab-pane fade" id="res-review" role="tabpanel">
              <div class="card shadow-soft">
                <div class="card-body">
                  <div class="table-responsive">
                    <table class="table table-sm align-middle mb-0" id="tbl-review">
                      <thead class="table-light">
                        <tr>
                          <th style="width:95px">Reso No.</th>
                          <th>Title</th>
                          <th style="width:220px">Nominated Lead</th>
                          <th style="width:380px">Basis</th>
                        </tr>
                      </thead>
                      <tbody></tbody>
                    </table>
                  </div>
                </div>
              </div>
            </div>

            <!-- Approved -->
            <div class="tab-pane fade" id="res-approved" role="tabpanel">
              <div class="card shadow-soft">
                <div class="card-body">
                  <div class="table-responsive">
                    <table class="table table-sm align-middle mb-0" id="tbl-approved">
                      <thead class="table-light">
                        <tr>
                          <th style="width:95px">Reso No.</th>
                          <th>Title</th>
                          <th style="width:220px">Nominated Lead</th>
                          <th style="width:380px">Basis</th>
                        </tr>
                      </thead>
                      <tbody></tbody>
                    </table>
                  </div>
                </div>
              </div>
            </div>

            <!-- Disapproved -->
            <div class="tab-pane fade" id="res-disapproved" role="tabpanel">
              <div class="card shadow-soft">
                <div class="card-body">
                  <div class="table-responsive">
                    <table class="table table-sm align-middle mb-0" id="tbl-disapproved">
                      <thead class="table-light">
                        <tr>
                          <th style="width:95px">Reso No.</th>
                          <th>Title</th>
                          <th style="width:220px">Nominated Lead</th>
                          <th style="width:380px">Basis</th>
                        </tr>
                      </thead>
                      <tbody></tbody>
                    </table>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </section>

        <!-- Officers -->
        <section class="tab-pane fade" id="tab-officers">
          <h2 class="h5 section-title mb-3">SPTA Officers (SY 2025–2026)</h2>
          <!-- 2-up on mobile, 3-up md, 4-up xl -->
          <div class="row row-cols-2 row-cols-md-3 row-cols-xl-4 g-3" id="officersGrid"></div>
        </section>

        <!-- Documents (if needed) -->
        <section class="tab-pane fade" id="tab-docs">
          <h2 class="h5 section-title mb-3">Documents & Downloads</h2>
          <ul class="list-group" id="docsList"></ul>
        </section>
      </main>
    </div>
  </div>

  <footer class="py-4 text-center text-muted small">
    <div>© <span id="year"></span> SFES SPTA • Designed by Joven Moralejo</div>
  </footer>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  <script>
    // Simple search guard
    function doGlobalSearch(){ /* TODO: wire up actual search */ }

    // --- Resolutions (all under Proposed, titles open PDF) ---
    const resolutionsData = [
      {no:'2025-001', title:'SPTA Records Turnover Request Resolution', lead:'VP Grace Echavia', basis:'DepEd Order No. 13, s. 2022 – Sec. 7(a)'},
      {no:'2025-002', title:'Creation of a New SPTA By-Laws', lead:'VP Grace Echavia', basis:'DepEd Order No. 13, s. 2022 – Sec. 8(a–c)'},
      {no:'2025-003', title:'Policy on Voluntary School Contributions (VSCs)', lead:'Treas. Leizelyn Agoy-Agoy', basis:'DepEd Order No. 13, s. 2022 – Sec. 10(a–b)'},
      {no:'2025-004', title:'Anonymous Feedback/Complaint Form for Parents', lead:'BoD Pedro L. Siervo, Jr.', basis:'DepEd Order No. 13, s. 2022 – Sec. 7(c)'},
      {no:'2025-005', title:'Establishing the SPTA Records Management and Archiving', lead:'BoD Riza Obsequio', basis:'EO No. 2, s. 2016; DepEd Order No. 13, s 2022 - Sec 9'},
      {no:'2025-006', title:'Establishing the SPTA Standing Committees', lead:'BoD Jennifer P. Ferrancol', basis:'DepEd Order No. 13, s. 2022 – Sec. 8(d)'},
      {no:'2025-007', title:'A Resolution Supporting the ARAL Program in SFES', lead:'Donnabel Lavides', basis:'DepEd Order No. 13, s. 2022 – Sec. 5(c)'},
      {no:'2025-008', title:'School Facilities and Classroom Comfort Review', lead:'Dahna Dale R. Pascual', basis:'First SPTA Conference MOM – Item X'},
      {no:'2025-009', title:'Supporting the Construction of Playground within School', lead:'BoDs Pedro L. Siervo, Jr. & Jennifer Ferrancol', basis:'1st SPTA MOM – Item b; Child-Friendly School Policy'},
      {no:'2025-010', title:'SPTA First 90-Day Plan', lead:'Pres. Joven Moralejo', basis:'Sec 3(b), DepEd Order No. 13, s. 2022'},
      {no:'2025-011', title:'Initial List of SPTA Projects', lead:'SPTA En Banc', basis:'2nd SPTA MOM - Item 4 '}
    ];
    const fileIndex = {
      '2025-001': 'P-SPTA Resolution 0001, S. 2025 - SPTA Records Turnover Request Resolution.pdf',
      '2025-002': 'P-SPTA Resolution 0002, S. 2025 - Creation of a New SPTA By-Laws.pdf',
      '2025-003': 'P-SPTA Resolution 0003, S. 2025 - Policy on Voluntary School Contributions (VSCs).pdf',
      '2025-004': 'P-SPTA Resolution 0004, S. 2025 - A Resolution Supporting the Anonymous Feedback Form to Parents.pdf',
      '2025-005': 'P-SPTA Resolution 0005, S. 2025 - Establishing the SPTA Records Management and Archiving.pdf',
      '2025-006': 'P-SPTA Resolution 0006, S. 2025 - Establishing the SPTA Standing Committees.pdf',
      '2025-007': 'P-SPTA Resolution 0007, S. 2025 - A Resolution Supporting the ARAL Program in SFES.pdf',
      '2025-008': 'P-SPTA Resolution 0008, S. 2025 - School Facilities and Classroom Comfort Review.pdf',
      '2025-009': 'P-SPTA Resolution 0009, S. 2025 - Supporting the Construction of Playground within School.pdf',
      '2025-010': 'P-SPTA Resolution 0010, S. 2025 - SPTA First 90-Day Plan.pdf',
      '2025-011': 'P-SPTA Resolution 0011, S. 2025 - Initial List of SPTA Projects.pdf'
    };
    function pdfHref(resoNo){
      const file = fileIndex[resoNo];
      return file ? `assets/resolutions/${encodeURI(file)}` : null;
    }
    function populateResoTable(tableId, rows){
      const tbody = document.querySelector(`#${tableId} tbody`);
      if(!tbody) return;
      tbody.innerHTML = '';
      if(!rows || rows.length===0){
        tbody.innerHTML = `<tr><td colspan="4" class="text-center text-muted">No items yet.</td></tr>`;
        return;
      }
      rows.forEach(r=>{
        const href = pdfHref(r.no);
        const titleHtml = href ? `<a href="${href}" target="_blank" rel="noopener">${r.title}</a>` : r.title;
        tbody.insertAdjacentHTML('beforeend',
          `<tr>
            <td>${r.no}</td>
            <td>${titleHtml}</td>
            <td>${r.lead || ''}</td>
            <td>${r.basis || ''}</td>
          </tr>`);
      });
    }
    function renderResolutionTables(){
      populateResoTable('tbl-proposed', resolutionsData);
      ['tbl-review','tbl-approved','tbl-disapproved'].forEach(id => populateResoTable(id, []));
    }

    // --- Officers (safe fallback image, no nested quotes) ---
    const officers = [
      {name:'Joven Moralejo',            role:'President',           photo:'assets/photos/officers/01pres.png'},
      {name:'Grace Echavia',             role:'Vice President',      photo:'assets/photos/officers/02vp.png'},
      {name:'Leizelyn Agoy-Agoy',        role:'Treasurer',           photo:'assets/photos/officers/03treas.png'},
      {name:'Maibel Ostonal',           role:'Secretary',           photo:'assets/photos/officers/04sec.png'},
      {name:'Riza Obsequio',             role:'Board of Director',   photo:'assets/photos/officers/05bodriza.png'},
      {name:'Jennifer P. Ferrancol',     role:'Board of Director',   photo:'assets/photos/officers/06bodjennifer.png'},
      {name:'Donnabel Lavides',          role:'Board of Director',   photo:'assets/photos/officers/07boddonna.png'},
      {name:'Dahna Dale R. Pascual',     role:'Board of Director',   photo:'assets/photos/officers/08boddahna.png'},
      {name:'Pedro L. Siervo, Jr.',      role:'Board of Director',   photo:'assets/photos/officers/08bodpedro.png'}
    ];
    // Precompute a simple SVG placeholder as a safe data URL
    const fallbackSrc = `data:image/svg+xml;charset=UTF-8,${encodeURIComponent(
      '<svg xmlns="http://www.w3.org/2000/svg" width="64" height="64"><rect width="100%" height="100%" fill="#e9ecef"/><text x="50%" y="54%" font-size="10" text-anchor="middle" fill="#6c757d">No Photo</text></svg>'
    )}`;

    function renderOfficers(){
      const grid = document.getElementById('officersGrid');
      if(!grid) return;
      grid.innerHTML = '';
      officers.forEach(o=>{
        const col = document.createElement('div');
        col.className = 'col';
        col.innerHTML = `
          <div class="card shadow-soft h-100">
            <div class="card-body d-flex align-items-center gap-3">
              <img class="rounded-circle border" alt="${o.name}"
                   style="width:64px;height:64px;object-fit:cover" />
              <div>
                <div class="fw-semibold">${o.name}</div>
                <div class="text-muted small">${o.role}</div>
              </div>
            </div>
          </div>`;
        const img = col.querySelector('img');
        img.src = o.photo;
        img.onerror = () => { img.onerror = null; img.src = fallbackSrc; };
        grid.appendChild(col);
      });
    }

    document.addEventListener('DOMContentLoaded', ()=>{
      document.getElementById('year').textContent = new Date().getFullYear();
      renderResolutionTables();
      renderOfficers();
    });
  </script>
</body>
</html>
