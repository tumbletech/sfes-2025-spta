<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>SFES SPTA Transparency Portal</title>
  <meta name="description" content="San Francisco Elementary School (Kiko Rosa, Brgy. San Francisco, General Trias City) – SPTA Transparency Portal." />
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
  <style>
    :root{--brand:#0d6efd;--muted:#6c757d}
    html,body{font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif;background:#f7f8fa}
    .shadow-soft{box-shadow:0 8px 30px rgba(0,0,0,.06)}
    .card{border:0;border-radius:1rem}
    .section-title{font-weight:700}
    .sidebar-sticky{position:sticky;top:84px}
    .nav-vert .nav-link{border-radius:.75rem;text-align:left}
    .nav-vert .nav-link.active{background:var(--brand);color:#fff}

    /* Mobile hamburger over hero */
    .mobile-menu-btn{
      position:fixed;top:16px;right:16px;z-index:1060;
      box-shadow:0 8px 20px rgba(0,0,0,.25);border-radius:.75rem
    }
    .mobile-bars,.mobile-bars::before,.mobile-bars::after{
      display:block;width:22px;height:2px;background:#fff;position:relative;border-radius:2px
    }
    .mobile-bars::before,.mobile-bars::after{content:"";position:absolute;left:0}
    .mobile-bars::before{top:-6px}.mobile-bars::after{top:6px}

    @media print{.no-print{display:none!important}body{background:#fff}}
  </style>
</head>
<body>
  <!-- Top Bar / Brand (no links, no toggler) -->
  <header class="bg-white border-bottom sticky-top">
    <div class="container py-2 d-flex align-items-center">
      <a class="d-flex align-items-center gap-2 text-decoration-none" href="#">
        <span class="badge text-bg-primary rounded-pill">SPTA</span>
        <span class="text-dark">
          <div class="fw-bold lh-1">San Francisco Elementary School</div>
          <small class="text-muted">Kiko Rosa, Brgy. San Francisco, General Trias City</small>
        </span>
      </a>
    </div>
  </header>

  <!-- Hero -->
  <section class="bg-primary text-white py-4 border-bottom position-relative">
    <div class="container">
      <div class="row align-items-center g-3">
        <div class="col-12 col-lg-8">
          <h1 class="h3 mb-2">SPTA Transparency Portal</h1>
          <p class="mb-0 opacity-75">Real-time view of resolutions, meetings, finances, projects, and documents. Built mobile‑first for parents and guardians.</p>
        </div>
        <div class="col-12 col-lg-4">
          <form class="d-flex gap-2" onsubmit="event.preventDefault(); /* hook up search later */">
            <input id="searchAll" type="search" class="form-control" placeholder="Search resolutions, minutes, finances, projects…"/>
            <button class="btn btn-light">Search</button>
          </form>
        </div>
      </div>
    </div>
    <!-- Mobile hamburger button (over hero) -->
    <button class="btn btn-dark mobile-menu-btn d-lg-none" type="button" data-bs-toggle="offcanvas" data-bs-target="#mobileMenu" aria-controls="mobileMenu" aria-label="Menu">
      <span class="mobile-bars"></span>
    </button>
  </section>

  <!-- Offcanvas Mobile Menu -->
  <div class="offcanvas offcanvas-end" tabindex="-1" id="mobileMenu" aria-labelledby="mobileMenuLabel">
    <div class="offcanvas-header">
      <h5 class="offcanvas-title" id="mobileMenuLabel">Menu</h5>
      <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close"></button>
    </div>
    <div class="offcanvas-body">
      <div class="list-group">
        <a class="list-group-item list-group-item-action" href="#tab-dashboard"  data-bs-toggle="pill" data-bs-dismiss="offcanvas">Dashboard</a>
        <a class="list-group-item list-group-item-action" href="#tab-resolutions" data-bs-toggle="pill" data-bs-dismiss="offcanvas">Resolutions</a>
        <a class="list-group-item list-group-item-action" href="#tab-meetings"    data-bs-toggle="pill" data-bs-dismiss="offcanvas">Meetings & Minutes</a>
        <a class="list-group-item list-group-item-action" href="#tab-finance"     data-bs-toggle="pill" data-bs-dismiss="offcanvas">Financials</a>
        <a class="list-group-item list-group-item-action" href="#tab-projects"    data-bs-toggle="pill" data-bs-dismiss="offcanvas">Projects</a>
        <a class="list-group-item list-group-item-action" href="#tab-log"         data-bs-toggle="pill" data-bs-dismiss="offcanvas">Transparency Log</a>
        <a class="list-group-item list-group-item-action" href="#tab-officers"    data-bs-toggle="pill" data-bs-dismiss="offcanvas">Officers & Signatures</a>
        <a class="list-group-item list-group-item-action" href="#tab-docs"        data-bs-toggle="pill" data-bs-dismiss="offcanvas">Documents</a>
        <a class="list-group-item list-group-item-action" href="#tab-feedback"    data-bs-toggle="pill" data-bs-dismiss="offcanvas">Feedback</a>
      </div>
    </div>
  </div>

  <!-- Main layout: Sidebar (lg+) + Content -->
  <div class="container py-3">
    <div class="row g-3">
      <!-- Sidebar for desktop -->
      <aside class="col-lg-3 d-none d-lg-block">
        <div class="sidebar-sticky">
          <div class="card shadow-soft">
            <div class="card-body">
              <h2 class="h6 text-muted mb-3">Menu</h2>
              <div class="nav nav-pills flex-column nav-vert" role="tablist" aria-orientation="vertical">
                <button class="nav-link active" data-bs-toggle="pill" data-bs-target="#tab-dashboard" type="button">Dashboard</button>
                <button class="nav-link" data-bs-toggle="pill" data-bs-target="#tab-resolutions" type="button">Resolutions</button>
                <button class="nav-link" data-bs-toggle="pill" data-bs-target="#tab-meetings" type="button">Meetings & Minutes</button>
                <button class="nav-link" data-bs-toggle="pill" data-bs-target="#tab-finance" type="button">Financials</button>
                <button class="nav-link" data-bs-toggle="pill" data-bs-target="#tab-projects" type="button">Projects</button>
                <button class="nav-link" data-bs-toggle="pill" data-bs-target="#tab-log" type="button">Transparency Log</button>
                <button class="nav-link" data-bs-toggle="pill" data-bs-target="#tab-officers" type="button">Officers & Signatures</button>
                <button class="nav-link" data-bs-toggle="pill" data-bs-target="#tab-docs" type="button">Documents</button>
                <button class="nav-link" data-bs-toggle="pill" data-bs-target="#tab-feedback" type="button">Feedback</button>
              </div>
            </div>
          </div>
        </div>
      </aside>

      <!-- Content -->
      <main class="col-12 col-lg-9 tab-content">
        <!-- Dashboard -->
        <section class="tab-pane fade show active" id="tab-dashboard">
          <div class="row g-3">
            <!-- KPIs -->
            <div class="col-6 col-md-3"><div class="card shadow-soft"><div class="card-body"><div class="text-muted small">Balance</div><div class="h4 mb-0" id="kpi-balance">₱29,800</div></div></div></div>
            <div class="col-6 col-md-3"><div class="card shadow-soft"><div class="card-body"><div class="text-muted small">Total Donations (YTD)</div><div class="h4 mb-0" id="kpi-donations">₱26,200</div></div></div></div>
            <div class="col-6 col-md-3"><div class="card shadow-soft"><div class="card-body"><div class="text-muted small">Projects Active</div><div class="h4 mb-0" id="kpi-projects">3</div></div></div></div>
            <div class="col-6 col-md-3"><div class="card shadow-soft"><div class="card-body"><div class="text-muted small">Issues Open</div><div class="h4 mb-0" id="kpi-issues">0</div></div></div></div>
          </div>

          <div class="row g-3 mt-1">
            <div class="col-12 col-xl-8">
              <div class="card shadow-soft"><div class="card-body">
                <h2 class="h6 section-title mb-3">Highlights</h2>
                <ul class="list-group list-group-flush" id="highlightsList">
                  <li class="list-group-item d-flex justify-content-between align-items-start"><span>Lighting Upgrade – Wing A is 68% complete; before/after lux readings to be posted next week.</span><a class="btn btn-sm btn-outline-primary" href="#tab-projects" data-bs-toggle="pill">Open</a></li>
                  <li class="list-group-item d-flex justify-content-between align-items-start"><span>Online Parents' Suggestion & Complaints form approved on 2025‑08‑05.</span><a class="btn btn-sm btn-outline-primary" href="#tab-resolutions" data-bs-toggle="pill">Open</a></li>
                  <li class="list-group-item d-flex justify-content-between align-items-start"><span>YTD donations: ₱26,200; thank you to our sponsors!</span><a class="btn btn-sm btn-outline-primary" href="#tab-finance" data-bs-toggle="pill">Open</a></li>
                </ul>
              </div></div>
            </div>
            <div class="col-12 col-xl-4">
              <div class="card shadow-soft"><div class="card-body">
                <h2 class="h6 section-title mb-3">Quick Links</h2>
                <div class="d-grid gap-2">
                  <a class="btn btn-outline-primary" href="#tab-resolutions" data-bs-toggle="pill">View Resolutions</a>
                  <a class="btn btn-outline-primary" href="#tab-finance" data-bs-toggle="pill">See Financials</a>
                  <a class="btn btn-outline-primary" href="#tab-projects" data-bs-toggle="pill">Projects Tracker</a>
                  <a class="btn btn-primary" href="#tab-feedback" data-bs-toggle="pill">Submit a Suggestion/Complaint</a>
                </div>
              </div></div>
            </div>
          </div>
        </section>

        <!-- Resolutions -->
        <section class="tab-pane fade" id="tab-resolutions">
          <div class="d-flex flex-column flex-md-row align-items-md-center justify-content-between gap-2 mb-3">
            <h2 class="h5 section-title mb-0">Resolutions on Record</h2>
            <div class="d-flex gap-2">
              <input id="filterResolution" type="search" class="form-control" placeholder="Filter by keyword…"/>
              <select id="filterStatus" class="form-select">
                <option value="">All Status</option>
                <option>Proposed</option>
                <option>Approved</option>
                <option>Amended</option>
                <option>Repealed</option>
              </select>
            </div>
          </div>
          <div class="list-group" id="resolutionsList"></div>
        </section>

        <!-- Meetings -->
        <section class="tab-pane fade" id="tab-meetings">
          <div class="d-flex flex-column flex-md-row align-items-md-center justify-content-between gap-2 mb-3">
            <h2 class="h5 section-title mb-0">Meetings & Minutes</h2>
            <input id="filterMinutes" type="search" class="form-control" placeholder="Search minutes…"/>
          </div>
          <div class="accordion" id="minutesAccordion"></div>
        </section>

        <!-- Financials -->
        <section class="tab-pane fade" id="tab-finance">
          <div class="d-flex flex-column flex-md-row align-items-md-center justify-content-between gap-2 mb-3">
            <h2 class="h5 section-title mb-0">Financial Transparency</h2>
            <div class="d-flex gap-2">
              <select id="financeYear" class="form-select"></select>
              <button class="btn btn-outline-secondary" id="downloadCsvBtn">Download CSV</button>
            </div>
          </div>
          <div class="row g-3">
            <div class="col-12 col-lg-6"><div class="card shadow-soft"><div class="card-body">
              <h3 class="h6 section-title mb-3">Income</h3>
              <div class="table-responsive"><table class="table table-sm align-middle" id="incomeTable"><thead class="table-light"><tr><th>Date</th><th>Source</th><th>Reference</th><th class="text-end">Amount (₱)</th></tr></thead><tbody></tbody></table></div>
            </div></div></div>
            <div class="col-12 col-lg-6"><div class="card shadow-soft"><div class="card-body">
              <h3 class="h6 section-title mb-3">Expenses</h3>
              <div class="table-responsive"><table class="table table-sm align-middle" id="expenseTable"><thead class="table-light"><tr><th>Date</th><th>Purpose</th><th>Reference</th><th class="text-end">Amount (₱)</th></tr></thead><tbody></tbody></table></div>
            </div></div></div>
          </div>
          <div class="row g-3 mt-1">
            <div class="col-12 col-lg-4"><div class="card shadow-soft"><div class="card-body"><div class="text-muted small">Opening Balance</div><div class="h5 mb-0" id="financeOpening">₱0</div></div></div></div>
            <div class="col-12 col-lg-4"><div class="card shadow-soft"><div class="card-body"><div class="text-muted small">Net for Selected Year</div><div class="h5 mb-0" id="financeNet">₱0</div></div></div></div>
            <div class="col-12 col-lg-4"><div class="card shadow-soft"><div class="card-body"><div class="text-muted small">Current Balance</div><div class="h5 mb-0" id="financeCurrent">₱0</div></div></div></div>
          </div>
        </section>

        <!-- Projects -->
        <section class="tab-pane fade" id="tab-projects">
          <div class="d-flex flex-column flex-md-row align-items-md-center justify-content-between gap-2 mb-3">
            <h2 class="h5 section-title mb-0">Projects & Procurement</h2>
            <div class="d-flex gap-2">
              <input id="filterProjects" type="search" class="form-control" placeholder="Filter projects…"/>
              <select id="filterPhase" class="form-select">
                <option value="">All Phases</option>
                <option>Planning</option>
                <option>Procurement</option>
                <option>Implementation</option>
                <option>Completed</option>
              </select>
            </div>
          </div>
          <div class="row g-3" id="projectsGrid"></div>
        </section>

        <!-- Transparency Log -->
        <section class="tab-pane fade" id="tab-log">
          <div class="d-flex flex-column flex-md-row align-items-md-center justify-content-between gap-2 mb-3">
            <h2 class="h5 section-title mb-0">Transparency Log / Audit Trail</h2>
            <input id="filterLog" type="search" class="form-control" placeholder="Search log…"/>
          </div>
          <div class="list-group" id="logList"></div>
        </section>

        <!-- Officers & Signatures -->
        <section class="tab-pane fade" id="tab-officers">
          <h2 class="h5 section-title mb-3">SPTA Officers (SY 2025–2026)</h2>
          <div class="row g-3" id="officersGrid"></div>
          <hr class="my-4"/>
          <h3 class="h6 section-title">Signatures Page</h3>
          <div class="table-responsive">
            <table class="table table-sm align-middle" id="signaturesTable">
              <thead class="table-light"><tr><th>Resolution #</th><th>Member</th><th>Role</th><th>Opinion</th><th>Signature</th><th>Date</th></tr></thead>
              <tbody></tbody>
            </table>
          </div>
        </section>

        <!-- Documents -->
        <section class="tab-pane fade" id="tab-docs">
          <h2 class="h5 section-title mb-3">Documents & Downloads</h2>
          <ul class="list-group" id="docsList"></ul>
        </section>

        <!-- Feedback -->
        <section class="tab-pane fade" id="tab-feedback">
          <div class="card shadow-soft"><div class="card-body">
            <h2 class="h5 section-title mb-3">Parents' Suggestion & Complaints</h2>
            <p class="mb-3">Use our online form to submit suggestions, concerns, or complaints. Items are logged and tracked for resolution.</p>
            <div class="d-flex flex-column flex-md-row gap-2">
              <a class="btn btn-primary" target="_blank" href="#">Open Online Form</a>
              <a class="btn btn-outline-secondary" target="_blank" href="#">View Public Issues Board</a>
            </div>
          </div></div>
        </section>
      </main>
    </div>
  </div>

  <footer class="py-4 text-center text-muted small">
    <div>© <span id="year"></span> SFES SPTA • Transparency by Design • Mobile‑first</div>
  </footer>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  <script>
    // ---- Minimal demo state with finance calc (replace with live data later) ----
    const state = {
      financeOpening: 15000,
      finance:{
        2025:{
          income:[
            {date:'2025-06-15',source:'Parents Donations',ref:'#DON-001',amount:8000},
            {date:'2025-07-05',source:'Bake Sale',ref:'#INC-004',amount:6200},
            {date:'2025-08-02',source:'Private Sponsor',ref:'#SPN-002',amount:12000}
          ],
          expenses:[
            {date:'2025-07-10',purpose:'Electric Fans (2)',ref:'#EXP-013',amount:4800},
            {date:'2025-07-22',purpose:'Printer Ink & Paper',ref:'#EXP-017',amount:1200},
            {date:'2025-08-08',purpose:'Lighting Upgrade',ref:'#EXP-021',amount:5400}
          ]
        }
      }
    };

    const peso = n => `₱${(n||0).toLocaleString('en-PH',{maximumFractionDigits:0})}`;

    function init(){
      document.getElementById('year').textContent = new Date().getFullYear();

      // Populate finance year
      const yearSel = document.getElementById('financeYear');
      Object.keys(state.finance).forEach(y=>{
        const o=document.createElement('option'); o.value=y; o.textContent=y; yearSel.appendChild(o);
      });
      yearSel.value='2025';
      renderFinance();

      // Keep sidebar buttons marked active when picking from offcanvas
      document.querySelectorAll('#mobileMenu [data-bs-toggle="pill"]').forEach(a=>{
        a.addEventListener('click',()=>{
          const target=a.getAttribute('href');
          document.querySelectorAll(`[data-bs-target="${target}"]`).forEach(btn=>btn.classList.add('active'));
        });
      });
    }

    function renderFinance(){
      const y=document.getElementById('financeYear').value;
      const income=state.finance[y]?.income||[];
      const expenses=state.finance[y]?.expenses||[];
      const incT=document.querySelector('#incomeTable tbody'); incT.innerHTML='';
      const expT=document.querySelector('#expenseTable tbody'); expT.innerHTML='';
      income.sort((a,b)=>a.date.localeCompare(b.date)).forEach(r=>{
        const tr=document.createElement('tr');
        tr.innerHTML=`<td>${r.date}</td><td>${r.source}</td><td>${r.ref}</td><td class='text-end'>${r.amount.toLocaleString('en-PH')}</td>`;
        incT.appendChild(tr);
      });
      expenses.sort((a,b)=>a.date.localeCompare(b.date)).forEach(r=>{
        const tr=document.createElement('tr');
        tr.innerHTML=`<td>${r.date}</td><td>${r.purpose}</td><td>${r.ref}</td><td class='text-end'>${r.amount.toLocaleString('en-PH')}</td>`;
        expT.appendChild(tr);
      });
      const inc=income.reduce((a,b)=>a+b.amount,0);
      const exp=expenses.reduce((a,b)=>a+b.amount,0);
      document.getElementById('financeOpening').textContent=peso(state.financeOpening);
      document.getElementById('financeNet').textContent=peso(inc-exp);
      document.getElementById('financeCurrent').textContent=peso(state.financeOpening+inc-exp);
    }

    document.addEventListener('DOMContentLoaded',init);
  </script>
</body>
</html>
